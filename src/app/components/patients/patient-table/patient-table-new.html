<div>
  <table mat-table [dataSource]="dataSource" matSort class="patient-table">
      <!-- Patient ID Column -->
      <ng-container matColumnDef="patientID">
        <th mat-header-cell *matHeaderCellDef >Patient ID</th>
        <td mat-cell *matCellDef="let patient">{{ patient.patientID }}</td>
      </ng-container>

      <!-- User ID Column -->
      <ng-container matColumnDef="userID">
        <th mat-header-cell *matHeaderCellDef >User ID</th>
        <td mat-cell *matCellDef="let patient">{{ patient.userID }}</td>
      </ng-container>

      <!-- First Name Column -->
      <ng-container matColumnDef="firstName">
        <th mat-header-cell *matHeaderCellDef >First Name</th>
        <td mat-cell *matCellDef="let patient">{{ patient.firstName }}</td>
      </ng-container>

      <!-- Last Name Column -->
      <ng-container matColumnDef="lastName">
        <th mat-header-cell *matHeaderCellDef >Last Name</th>
        <td mat-cell *matCellDef="let patient">{{ patient.lastName }}</td>
      </ng-container>

      <!-- Date of Birth Column -->
      <ng-container matColumnDef="dateOfBirth">
        <th mat-header-cell *matHeaderCellDef >Date of Birth</th>
        <td mat-cell *matCellDef="let patient">{{ patient.dateOfBirth | date:'mediumDate' }}</td>
      </ng-container>

      <!-- Gender Column -->
      <ng-container matColumnDef="gender">
        <th mat-header-cell *matHeaderCellDef >Gender</th>
        <td mat-cell *matCellDef="let patient">{{ patient.gender }}</td>
      </ng-container>

      <!-- Contact Number Column -->
      <ng-container matColumnDef="contactNumber">
        <th mat-header-cell *matHeaderCellDef >Contact Number</th>
        <td mat-cell *matCellDef="let patient">{{ patient.contactNumber }}</td>
      </ng-container>

      <!-- Address Column -->
      <ng-container matColumnDef="address">
        <th mat-header-cell *matHeaderCellDef >Address</th>
        <td mat-cell *matCellDef="let patient">{{ patient.address }}</td>
      </ng-container>

      <!-- Medical History Column -->
      <ng-container matColumnDef="medicalHistory">
        <th mat-header-cell *matHeaderCellDef >Medical History</th>
        <td mat-cell *matCellDef="let patient">
          <span [title]="patient.medicalHistory" class="truncate-text">
            {{ patient.medicalHistory || 'None' }}
          </span>
        </td>
      </ng-container>

      <!-- Allergies Column -->
      <ng-container matColumnDef="allergies">
        <th mat-header-cell *matHeaderCellDef >Allergies</th>
        <td mat-cell *matCellDef="let patient">
          <span [title]="patient.allergies" class="truncate-text">
            {{ patient.allergies || 'None' }}
          </span>
        </td>
      </ng-container>

      <!-- Current Medications Column -->
      <ng-container matColumnDef="currentMedications">
        <th mat-header-cell *matHeaderCellDef >Current Medications</th>
        <td mat-cell *matCellDef="let patient">
          <span [title]="patient.currentMedications" class="truncate-text">
            {{ patient.currentMedications || 'None' }}
          </span>
        </td>
      </ng-container>

      <!-- Created Date Column -->
      <ng-container matColumnDef="createdat">
       <th mat-header-cell *matHeaderCellDef > Created At </th>
       <td mat-cell *matCellDef="let patient">{{ patient.createdAt | date:'medium' }}</td>
      </ng-container>

      <!-- Modified Date Column -->
      <ng-container matColumnDef="modifiedat">
        <th mat-header-cell *matHeaderCellDef > Modified At </th>
        <td mat-cell *matCellDef="let patient">{{ patient.modifiedAt | date:'medium' }}</td>
      </ng-container>

      <!-- isActive Column -->
      <ng-container matColumnDef="isactive">
        <th mat-header-cell *matHeaderCellDef > isActive </th>
        <td mat-cell *matCellDef="let patient">{{ patient.isActive }}</td>
      </ng-container>

      <!-- Actions column -->
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        <td mat-cell *matCellDef="let patient">
          <button mat-icon-button color="primary" title="View Details">
            <mat-icon>visibility</mat-icon>
          </button>
          <button mat-icon-button color="accent" title="Edit Patient">
            <mat-icon>edit</mat-icon>
          </button>
          <button mat-icon-button color="warn" title="Delete Patient">
            <mat-icon>delete</mat-icon>
          </button>
        </td>
      </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>

  <mat-paginator
      [length]="totalItems"
      [pageSize]="pageSize"
      [pageIndex]="currentPage"
      [pageSizeOptions]="[5, 10, 20, 50]"
      (page)="onPageChange($event)"
      showFirstLastButtons
      aria-label="Select page of patients"
  ></mat-paginator>
</div>
